<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LPS Crawler - Working Demo</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: Arial, sans-serif; background: #f0f0f0; padding: 20px; }
        .container { max-width: 800px; margin: 0 auto; background: white; border-radius: 10px; padding: 30px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .header { text-align: center; margin-bottom: 30px; }
        .header h1 { color: #1976d2; margin-bottom: 10px; }
        .tabs { display: flex; margin-bottom: 20px; }
        .tab { flex: 1; padding: 15px; border: none; background: #e3f2fd; color: #1976d2; cursor: pointer; font-weight: bold; }
        .tab.active { background: #1976d2; color: white; }
        .tab-content { display: none; padding: 20px; }
        .tab-content.active { display: block; }
        .form-group { margin-bottom: 20px; }
        .form-label { display: block; margin-bottom: 5px; font-weight: bold; }
        .form-input { width: 100%; padding: 10px; border: 2px solid #e0e0e0; border-radius: 5px; }
        .button-group { display: flex; gap: 10px; margin-top: 20px; }
        .btn { padding: 12px 24px; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; }
        .btn-primary { background: #1976d2; color: white; }
        .btn-secondary { background: #757575; color: white; }
        .progress-bar { width: 100%; height: 20px; background: #e0e0e0; border-radius: 10px; overflow: hidden; margin: 10px 0; }
        .progress-fill { height: 100%; background: #4caf50; transition: width 0.3s ease; }
        .results { display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; margin-top: 20px; }
        .result-card { background: #f5f5f5; padding: 15px; text-align: center; border-radius: 5px; }
        .result-value { font-size: 1.5em; font-weight: bold; color: #1976d2; }
        .result-label { font-size: 0.9em; color: #666; margin-top: 5px; }
        .notification { position: fixed; bottom: 20px; right: 20px; background: white; padding: 15px 20px; border-radius: 5px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); transform: translateX(100%); transition: transform 0.3s ease; }
        .notification.show { transform: translateX(0); }
        .notification.success { border-left: 4px solid #4caf50; }
        .notification.warning { border-left: 4px solid #ff9800; }
        .notification.error { border-left: 4px solid #f44336; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üï∑Ô∏è LPS Crawler Pro</h1>
            <p>Professional Web Scraping Tool with Desktop GUI</p>
        </div>

        <!-- Tabs -->
        <div class="tabs">
            <button class="tab active" onclick="switchTab(0)">Web Crawler</button>
            <button class="tab" onclick="switchTab(1)">Image Extractor</button>
            <button class="tab" onclick="switchTab(2)">Video Extractor</button>
            <button class="tab" onclick="switchTab(3)">Settings</button>
        </div>

        <!-- Tab Contents -->
        <div class="tab-content active" id="tab-0">
            <h3>üï∑Ô∏è Web Crawler</h3>
            <div class="form-group">
                <label class="form-label">Target URL</label>
                <input type="url" class="form-input" id="crawl-url" value="https://example.com" placeholder="https://example.com">
            </div>
            <div class="form-group">
                <label class="form-label">Max Phases: <span id="crawl-phases-value">20</span></label>
                <input type="range" id="crawl-phases" min="5" max="100" value="20" oninput="updateSlider('crawl-phases')" style="width: 100%;">
            </div>
            <div class="button-group">
                <button class="btn btn-primary" onclick="startCrawling()">üöÄ Start Crawling</button>
                <button class="btn btn-secondary" onclick="exportResults()">üì• Export Results</button>
            </div>
            <h4>üìä Progress</h4>
            <div class="progress-bar">
                <div class="progress-fill" id="crawl-progress" style="width: 0%"></div>
            </div>
            <p id="crawl-status">Ready to start crawling</p>
            <div class="results" id="crawl-results">
                <div class="result-card">
                    <div class="result-value" id="crawl-phases-completed">0</div>
                    <div class="result-label">Phases Completed</div>
                </div>
                <div class="result-card">
                    <div class="result-value" id="crawl-links-found">0</div>
                    <div class="result-label">Links Found</div>
                </div>
                <div class="result-card">
                    <div class="result-value" id="crawl-duration">0.0s</div>
                    <div class="result-label">Duration</div>
                </div>
                <div class="result-card">
                    <div class="result-value" id="crawl-tension">0.00</div>
                    <div class="result-label">Avg Tension</div>
                </div>
            </div>
        </div>

        <div class="tab-content" id="tab-1">
            <h3>üì∏ Image Extractor</h3>
            <div class="form-group">
                <label class="form-label">Target URL</label>
                <input type="url" class="form-input" id="image-url" value="https://unsplash.com" placeholder="https://unsplash.com">
            </div>
            <div class="form-group">
                <label class="form-label">Max Scrolls: <span id="image-scrolls-value">30</span></label>
                <input type="range" id="image-scrolls" min="5" max="100" value="30" oninput="updateSlider('image-scrolls')" style="width: 100%;">
            </div>
            <div class="button-group">
                <button class="btn btn-primary" onclick="startImageExtraction()">üì∏ Start Extraction</button>
            </div>
            <h4>üìà Results</h4>
            <div class="results" id="image-results">
                <div class="result-card">
                    <div class="result-value" id="image-count">0</div>
                    <div class="result-label">Images Found</div>
                </div>
            </div>
            <div id="image-gallery" style="margin-top: 20px;"></div>
        </div>

        <div class="tab-content" id="tab-2">
            <h3>üé• Video Extractor</h3>
            <div class="form-group">
                <label class="form-label">Target URL</label>
                <input type="url" class="form-input" id="video-url" value="https://www.youtube.com/watch?v=dQw4w9WgXcQ" placeholder="https://video-site.com">
            </div>
            <div class="button-group">
                <button class="btn btn-primary" onclick="startVideoExtraction()">üé• Start Extraction</button>
            </div>
            <h4>üìà Results</h4>
            <div class="results" id="video-results">
                <div class="result-card">
                    <div class="result-value" id="video-total">0</div>
                    <div class="result-label">Videos Found</div>
                </div>
            </div>
            <div id="video-list" style="margin-top: 20px;"></div>
        </div>

        <div class="tab-content" id="tab-3">
            <h3>‚öôÔ∏è Settings</h3>
            <div class="form-group">
                <label class="form-label">Download Directory</label>
                <input type="text" class="form-input" id="settings-download-dir" value="./downloads" placeholder="./downloads">
            </div>
            <div class="form-group">
                <label class="form-label">Max Concurrent Downloads: <span id="settings-concurrent-value">5</span></label>
                <input type="range" id="settings-concurrent" min="1" max="20" value="5" oninput="updateSlider('settings-concurrent')" style="width: 100%;">
            </div>
            <div class="button-group">
                <button class="btn btn-primary" onclick="saveSettings()">üíæ Save Settings</button>
            </div>
        </div>
    </div>

    <!-- Notification -->
    <div id="notification" class="notification"></div>

    <script>
        // Simple tab switching
        window.switchTab = function(tabIndex) {
            console.log('üîÑ Switching to tab:', tabIndex);
            
            // Update active tab
            document.querySelectorAll('.tab').forEach((tab, index) => {
                tab.classList.toggle('active', index === tabIndex);
            });

            // Update active content
            document.querySelectorAll('.tab-content').forEach((content, index) => {
                content.classList.toggle('active', index === tabIndex);
            });
            
            showNotification('Switched to tab ' + (tabIndex + 1), 'info');
        };

        // Slider updates
        window.updateSlider = function(sliderId) {
            const slider = document.getElementById(sliderId);
            const valueSpan = document.getElementById(sliderId + '-value');
            
            if (slider && valueSpan) {
                let value = slider.value;
                if (sliderId.includes('delay') || sliderId.includes('window')) {
                    value += 'ms';
                }
                valueSpan.textContent = value;
            }
        };

        // Notification system
        window.showNotification = function(message, type = 'info') {
            console.log('üì¢ Notification:', type, message);
            
            const notification = document.getElementById('notification');
            notification.className = 'notification ' + type;
            notification.innerHTML = `<strong>${type.toUpperCase()}</strong><br>${message}`;
            notification.classList.add('show');

            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        };

        // Crawler Functions
        window.startCrawling = function() {
            console.log('üï∑Ô∏è Starting web crawler...');
            
            const url = document.getElementById('crawl-url').value;
            const maxPhases = parseInt(document.getElementById('crawl-phases').value);
            
            if (!url) {
                showNotification('Please enter a URL', 'warning');
                return;
            }
            
            console.log('üéØ Starting crawler with:', { url, maxPhases });
            
            // Reset UI
            document.getElementById('crawl-progress').style.width = '0%';
            document.getElementById('crawl-status').textContent = 'Initializing crawler...';
            
            // Simulate crawling
            simulateCrawling(url, maxPhases);
        };

        window.exportResults = function() {
            console.log('‚¨áÔ∏è Exporting results...');
            showNotification('Export functionality would save results to file', 'info');
        };

        // Image Extractor Functions
        window.startImageExtraction = function() {
            console.log('üì∏ Starting image extraction...');
            
            const url = document.getElementById('image-url').value;
            const maxScrolls = parseInt(document.getElementById('image-scrolls').value);
            
            if (!url) {
                showNotification('Please enter a URL', 'warning');
                return;
            }
            
            console.log('üéØ Starting image extraction with:', { url, maxScrolls });
            
            // Reset UI
            document.getElementById('image-progress').style.width = '0%';
            document.getElementById('image-status').textContent = 'Initializing image extractor...';
            document.getElementById('image-gallery').innerHTML = '';
            
            // Simulate image extraction
            simulateImageExtraction(url, maxScrolls);
        };

        // Video Extractor Functions
        window.startVideoExtraction = function() {
            console.log('üé• Starting video extraction...');
            
            const url = document.getElementById('video-url').value;
            
            if (!url) {
                showNotification('Please enter a URL', 'warning');
                return;
            }
            
            console.log('üéØ Starting video extraction with:', { url });
            
            // Reset UI
            document.getElementById('video-progress').style.width = '0%';
            document.getElementById('video-status').textContent = 'Initializing video extractor...';
            document.getElementById('video-list').innerHTML = '';
            
            // Simulate video extraction
            simulateVideoExtraction(url);
        };

        // Settings Functions
        window.saveSettings = function() {
            console.log('üíæ Saving settings...');
            showNotification('Settings saved successfully!', 'success');
        };

        // Simulation Functions
        function simulateCrawling(url, maxPhases) {
            console.log('üîÑ Simulating crawling for', maxPhases, 'phases...');
            
            let currentPhase = 0;
            let totalLinks = 0;
            let startTime = Date.now();
            
            function crawlPhase() {
                if (currentPhase >= maxPhases) {
                    document.getElementById('crawl-progress').style.width = '100%';
                    document.getElementById('crawl-status').textContent = 'Crawling completed!';
                    showNotification('Web crawling completed successfully!', 'success');
                    return;
                }
                
                // Update progress
                const progress = ((currentPhase + 1) / maxPhases) * 100;
                document.getElementById('crawl-progress').style.width = progress + '%';
                document.getElementById('crawl-status').textContent = `Phase ${currentPhase + 1} of ${maxPhases}`;
                
                // Simulate finding links
                const linksFound = Math.floor(Math.random() * 8) + 2;
                totalLinks += linksFound;
                const tension = Math.random() * 2;
                
                // Update results
                document.getElementById('crawl-phases-completed').textContent = currentPhase + 1;
                document.getElementById('crawl-links-found').textContent = totalLinks;
                document.getElementById('crawl-duration').textContent = ((Date.now() - startTime) / 1000).toFixed(1) + 's';
                document.getElementById('crawl-tension').textContent = tension.toFixed(2);
                
                currentPhase++;
                
                // Continue to next phase
                setTimeout(crawlPhase, 800);
            }
            
            crawlPhase();
        }

        function simulateImageExtraction(url, maxScrolls) {
            console.log('üîÑ Simulating image extraction for', maxScrolls, 'scrolls...');
            
            let currentScroll = 0;
            let totalImages = 0;
            let startTime = Date.now();
            
            function scrollPhase() {
                if (currentScroll >= maxScrolls) {
                    document.getElementById('image-progress').style.width = '100%';
                    document.getElementById('image-status').textContent = 'Image extraction completed!';
                    showNotification(`Image extraction completed! Found ${totalImages} images`, 'success');
                    return;
                }
                
                // Update progress
                const progress = ((currentScroll + 1) / maxScrolls) * 100;
                document.getElementById('image-progress').style.width = progress + '%';
                document.getElementById('image-status').textContent = `Scroll ${currentScroll + 1} of ${maxScrolls}`;
                
                // Simulate finding images
                const imagesFound = Math.floor(Math.random() * 5) + 1;
                totalImages += imagesFound;
                
                // Add images to gallery
                for (let i = 0; i < imagesFound; i++) {
                    const gallery = document.getElementById('image-gallery');
                    const imageItem = document.createElement('div');
                    imageItem.style.cssText = 'display: inline-block; margin: 5px; padding: 10px; background: #e3f2fd; border-radius: 5px; text-align: center;';
                    imageItem.innerHTML = `
                        <div style="width: 80px; height: 60px; background: #1976d2; color: white; display: flex; align-items: center; justify-content: center; margin-bottom: 5px;">IMG</div>
                        <div style="font-size: 12px;">Image ${gallery.children.length + 1}</div>
                    `;
                    gallery.appendChild(imageItem);
                }
                
                // Update count
                document.getElementById('image-count').textContent = totalImages;
                
                currentScroll++;
                
                // Continue to next scroll
                setTimeout(scrollPhase, 1000);
            }
            
            scrollPhase();
        }

        function simulateVideoExtraction(url) {
            console.log('üîÑ Simulating video extraction...');
            
            let currentStep = 0;
            const totalSteps = 5;
            let totalVideos = 0;
            
            function extractionStep() {
                if (currentStep >= totalSteps) {
                    document.getElementById('video-progress').style.width = '100%';
                    document.getElementById('video-status').textContent = 'Video extraction completed!';
                    showNotification(`Video extraction completed! Found ${totalVideos} video sources`, 'success');
                    return;
                }
                
                // Update progress
                const progress = ((currentStep + 1) / totalSteps) * 100;
                document.getElementById('video-progress').style.width = progress + '%';
                document.getElementById('video-status').textContent = `Scanning for video sources...`;
                
                // Simulate finding videos at step 2
                if (currentStep === 2) {
                    const sampleVideos = [
                        { type: 'hls', name: 'HLS Stream', quality: '1080p' },
                        { type: 'dash', name: 'DASH Stream', quality: '720p' },
                        { type: 'direct', name: 'Direct Video', quality: '1080p' },
                        { type: 'blob', name: 'Blob URL', quality: 'Unknown' }
                    ];
                    
                    const videoList = document.getElementById('video-list');
                    sampleVideos.forEach(video => {
                        const section = document.createElement('div');
                        section.style.cssText = 'margin-bottom: 10px; padding: 10px; background: #f5f5f5; border-radius: 5px;';
                        section.innerHTML = `
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <strong>${video.name}</strong>
                                <span style="background: #e3f2fd; color: #1976d2; padding: 2px 8px; border-radius: 3px; font-size: 12px;">${video.quality}</span>
                            </div>
                        `;
                        videoList.appendChild(section);
                        totalVideos++;
                    });
                    
                    document.getElementById('video-total').textContent = totalVideos;
                }
                
                currentStep++;
                
                // Continue to next step
                setTimeout(extractionStep, 1000);
            }
            
            extractionStep();
        }

        // Initialize
        console.log('‚úÖ LPS Crawler Working Demo: Initialization complete!');
        console.log('üéØ Ready for user interaction!');
        showNotification('LPS Crawler working demo loaded successfully!', 'success');
    </script>
</body>
</html>